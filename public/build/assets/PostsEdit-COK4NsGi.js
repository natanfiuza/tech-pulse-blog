import{r as g,c as C,o as l,w as _,a as e,b as k,d as b,e as c,f,v,t as u,i as E,l as w,k as V}from"./app-urMFwqY6.js";import{A as B}from"./AdminLayout-OFpmX6-e.js";import{M}from"./MarkdownEditor-CRI4i5J0.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{AdminLayout:B,MarkdownEditor:M},props:{post:Object},setup(i){var d,m,r;const o=w(((d=i.post)==null?void 0:d.content)||""),a=V.useForm({title:((m=i.post)==null?void 0:m.title)||"",excerpt:((r=i.post)==null?void 0:r.excerpt)||"",image:null});function t(){let s=null;try{const n=new TextEncoder().encode(o.value),y=String.fromCharCode(...n);s=btoa(y)}catch(n){console.error("Erro ao codificar conteúdo:",n),a.setError("content","Não foi possível codificar o conteúdo para envio.");return}a.transform(n=>({...n,content:s})).post(route("posts.update",{uuid:i.post.uuid}),{onError:n=>{console.error("Erros do Backend:",n)}})}function p(s){a.image=s.target.files[0]}return{form:a,submit:t,onFileChange:p,originalContent:o,updateOriginalContent:s=>{o.value=s}}}},N={class:"mt-4 form-group"},O={key:0,class:"erro-message"},S={class:"mt-3 form-group"},U={key:0,class:"erro-message"},L={class:"mt-3 form-group"},T={key:0,class:"erro-message"},h={class:"mt-3 form-group"},z={key:0,class:"erro-message"},D=["disabled"];function I(i,o,a,t,p,x){const d=g("MarkdownEditor"),m=g("AdminLayout");return l(),C(m,null,{default:_(()=>[o[8]||(o[8]=e("h1",null,"Editar Post",-1)),e("form",{onSubmit:o[3]||(o[3]=k((...r)=>t.submit&&t.submit(...r),["prevent"])),enctype:"multipart/form-data"},[e("div",N,[o[4]||(o[4]=e("label",{for:"title"},"Título:",-1)),b(e("input",{id:"title","onUpdate:modelValue":o[0]||(o[0]=r=>t.form.title=r),class:"form-control",type:"text"},null,512),[[v,t.form.title]]),t.form.errors.title?(l(),c("div",O,u(t.form.errors.title),1)):f("",!0)]),e("div",S,[o[5]||(o[5]=e("label",{for:"content"},"Conteúdo:",-1)),E(d,{modelValue:t.originalContent,"onUpdate:modelValue":t.updateOriginalContent},null,8,["modelValue","onUpdate:modelValue"]),t.form.errors.content?(l(),c("div",U,u(t.form.errors.content),1)):f("",!0)]),e("div",L,[o[6]||(o[6]=e("label",{for:"excerpt"},"Resumo:",-1)),b(e("textarea",{id:"excerpt","onUpdate:modelValue":o[1]||(o[1]=r=>t.form.excerpt=r),rows:"5",class:"form-control"},null,512),[[v,t.form.excerpt]]),t.form.errors.excerpt?(l(),c("div",T,u(t.form.errors.excerpt),1)):f("",!0)]),e("div",h,[o[7]||(o[7]=e("label",{for:"image"},"Imagem:",-1)),e("input",{id:"image",type:"file",onChange:o[2]||(o[2]=(...r)=>t.onFileChange&&t.onFileChange(...r)),class:"form-control"},null,32),t.form.errors.image?(l(),c("div",z,u(t.form.errors.image),1)):f("",!0)]),e("button",{type:"submit",class:"btn btn-primary mt-4 btn-atualizar",disabled:t.form.processing}," Atualizar ",8,D)],32)]),_:1})}const G=A(F,[["render",I],["__scopeId","data-v-1274cb41"]]);export{G as default};
