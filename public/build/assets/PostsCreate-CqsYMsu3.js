import{r as g,c as v,o as i,w as x,a as e,b as C,d as u,e as a,f as l,v as p,t as m,i as y,l as k,k as _}from"./app-urMFwqY6.js";import{A as E}from"./AdminLayout-OFpmX6-e.js";import{M as w}from"./MarkdownEditor-CRI4i5J0.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={components:{AdminLayout:E,MarkdownEditor:w},setup(){const d=k(""),o=_.useForm({title:"",excerpt:"",image:null});function c(s){s.target.files.length>0?o.image=s.target.files[0]:o.image=null}function r(){let s=null;try{const t=new TextEncoder().encode(d.value),f=String.fromCharCode(...t);s=btoa(f)}catch(t){console.error("Erro ao codificar conteúdo:",t),o.setError("content","Não foi possível codificar o conteúdo para envio.");return}o.transform(t=>({...t,content:s})).post(route("posts.store"),{forceFormData:o.image instanceof File,onError:t=>{console.error("Erros do Backend:",t),!t.content&&o.errors.content==="Não foi possível codificar o conteúdo para envio."&&o.clearErrors("content")}})}return{form:o,submit:r,originalContent:d,onFileChange:c}}},F={class:"mt-4 form-group"},M={key:0,class:"erro-message"},N={key:0,class:"erro-message"},A={class:"mt-3 form-group"},S={key:0,class:"erro-message"},D={class:"mt-3 form-group"},L={key:0,class:"erro-message"},T=["disabled"];function U(d,o,c,r,s,t){const f=g("MarkdownEditor"),b=g("AdminLayout");return i(),v(b,null,{default:x(()=>[o[9]||(o[9]=e("h2",null,"Novo Post",-1)),e("form",{onSubmit:o[4]||(o[4]=C((...n)=>r.submit&&r.submit(...n),["prevent"]))},[e("div",F,[o[5]||(o[5]=e("label",{for:"title"},"Título:",-1)),u(e("input",{id:"title","onUpdate:modelValue":o[0]||(o[0]=n=>r.form.title=n),type:"text",class:"form-control"},null,512),[[p,r.form.title]]),r.form.errors.title?(i(),a("div",M,m(r.form.errors.title),1)):l("",!0)]),e("div",null,[o[6]||(o[6]=e("label",{for:"content"},"Conteúdo:",-1)),y(f,{modelValue:r.originalContent,"onUpdate:modelValue":o[1]||(o[1]=n=>r.originalContent=n)},null,8,["modelValue"]),r.form.errors.content?(i(),a("div",N,m(r.form.errors.content),1)):l("",!0)]),e("div",A,[o[7]||(o[7]=e("label",{for:"excerpt"},"Resumo:",-1)),u(e("textarea",{id:"excerpt","onUpdate:modelValue":o[2]||(o[2]=n=>r.form.excerpt=n),rows:"5",class:"form-control"},null,512),[[p,r.form.excerpt]]),r.form.errors.excerpt?(i(),a("div",S,m(r.form.errors.excerpt),1)):l("",!0)]),e("div",D,[o[8]||(o[8]=e("label",{for:"image"},"Imagem:",-1)),e("input",{id:"image",type:"file",onChange:o[3]||(o[3]=(...n)=>r.onFileChange&&r.onFileChange(...n)),class:"form-control"},null,32),r.form.errors.image?(i(),a("div",L,m(r.form.errors.image),1)):l("",!0)]),e("button",{type:"submit",class:"btn btn-primary mt-4 btn-criar",disabled:r.form.processing}," Criar ",8,T)],32)]),_:1})}const j=V(B,[["render",U],["__scopeId","data-v-fc419b6e"]]);export{j as default};
