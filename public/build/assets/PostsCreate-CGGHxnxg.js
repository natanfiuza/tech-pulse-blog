import{r as u,c as y,o as i,w as C,a as e,j as _,f as v,b as l,g as a,l as f,v as x,t as m,e as E,m as k,d as w,p as g}from"./app-B203rjcQ.js";import{A as V}from"./AdminLayout-D--pUtDB.js";import{M as F}from"./MarkdownEditor--T3h2iAi.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={components:{AdminLayout:V,MarkdownEditor:F},setup(){const d=k(""),o=w.useForm({title:"",excerpt:"",image:null});function p(t){t.target.files.length>0?o.image=t.target.files[0]:o.image=null}g(()=>o.title,t=>{t&&o.errors.title&&(o.errors.title=null)}),g(()=>o.excerpt,t=>{t&&o.errors.excerpt&&(o.errors.excerpt=null)}),g(()=>o.content,t=>{t&&o.errors.content&&(o.errors.content=null)});function r(){let t=null;try{const n=new TextEncoder().encode(d.value),c=String.fromCharCode(...n);t=btoa(c)}catch(n){console.error("Erro ao codificar conteúdo:",n),o.setError("content","Não foi possível codificar o conteúdo para envio.");return}o.transform(n=>({...n,content:t})).post(route("posts.store"),{forceFormData:o.image instanceof File,onError:n=>{console.error("Erros:",n),!n.content&&o.errors.content==="Não foi possível codificar o conteúdo para envio."&&o.clearErrors("content")}})}return{form:o,submit:r,originalContent:d,onFileChange:p}}},B={class:"mt-4 form-group"},A={key:0,class:"erro-message"},S={class:"mt-4"},D={key:0,class:"erro-message"},L={class:"mt-3 form-group"},T={key:0,class:"erro-message"},U={class:"mt-3 form-group"},h={key:0,class:"erro-message"},I=["disabled"];function P(d,o,p,r,t,n){const c=u("MarkdownEditor"),b=u("AdminLayout");return i(),y(b,null,{default:C(()=>[o[9]||(o[9]=e("h2",null,"Novo Post",-1)),e("form",{onSubmit:o[4]||(o[4]=_((...s)=>r.submit&&r.submit(...s),["prevent"]))},[e("div",B,[o[5]||(o[5]=e("label",{for:"title"},"Título:",-1)),v(e("input",{id:"title","onUpdate:modelValue":o[0]||(o[0]=s=>r.form.title=s),type:"text",class:f(["form-control",{"is-invalid":r.form.errors.title}])},null,2),[[x,r.form.title]]),r.form.errors.title?(i(),l("div",A,m(r.form.errors.title),1)):a("",!0)]),e("div",S,[o[6]||(o[6]=e("label",{for:"content"},"Conteúdo:",-1)),E(c,{modelValue:r.form.content,"onUpdate:modelValue":o[1]||(o[1]=s=>r.form.content=s),class:f({"is-invalid":r.form.errors.content})},null,8,["modelValue","class"]),r.form.errors.content?(i(),l("div",D,m(r.form.errors.content),1)):a("",!0)]),e("div",L,[o[7]||(o[7]=e("label",{for:"excerpt"},"Resumo:",-1)),v(e("textarea",{id:"excerpt","onUpdate:modelValue":o[2]||(o[2]=s=>r.form.excerpt=s),rows:"5",class:f(["form-control",{"is-invalid":r.form.errors.excerpt}])},null,2),[[x,r.form.excerpt]]),r.form.errors.excerpt?(i(),l("div",T,m(r.form.errors.excerpt),1)):a("",!0)]),e("div",U,[o[8]||(o[8]=e("label",{for:"image"},"Imagem:",-1)),e("input",{id:"image",type:"file",onChange:o[3]||(o[3]=(...s)=>r.onFileChange&&r.onFileChange(...s)),class:"form-control"},null,32),r.form.errors.image?(i(),l("div",h,m(r.form.errors.image),1)):a("",!0)]),e("button",{type:"submit",class:"btn btn-primary mt-4 btn-criar",disabled:r.form.processing}," Criar ",8,I)],32)]),_:1})}const G=M(N,[["render",P],["__scopeId","data-v-f69c6fc6"]]);export{G as default};
